<!DOCTYPE html>
<html>
<head>
  <title>Buggy Driver</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<header>üßë‚Äç‚úàÔ∏è Driver Panel</header>

<div class="container">
  <div class="card">

    <label>Select Buggy</label>
    <select id="buggyId">
      <option value="buggy1">Buggy 1</option>
      <option value="buggy2">Buggy 2</option>
    </select>

    <button onclick="startTracking()">Start Driving</button>
    <button class="stop" onclick="stopTracking()">Stop</button>

    <div class="status" id="status">Status: OFF</div>

  </div>
</div>

<script src="firebase.js"></script>

<script>
let watchId = null;

function startTracking() {
  document.getElementById("status").innerText = "Status: ON";

  watchId = navigator.geolocation.watchPosition(
    (pos) => {
      const data = {
        lat: pos.coords.latitude,
        lng: pos.coords.longitude,
        timestamp: Date.now()
      };

      database.ref("buggies/" + document.getElementById("buggyId").value)
        .set(data);
    },
    (err) => alert("Location error: " + err.message),
    { enableHighAccuracy: true, maximumAge: 2000 }
  );
}

function stopTracking() {
  if (watchId) navigator.geolocation.clearWatch(watchId);
  document.getElementById("status").innerText = "Status: OFF";
}
</script>

</body>
</html>
